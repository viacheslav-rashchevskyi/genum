enum AiVendor {
    OPENAI
    GOOGLE
    ANTHROPIC
    CUSTOM_OPENAI_COMPATIBLE
}

model LanguageModel {
    id                  Int      @id @default(autoincrement())
    name                String   @db.VarChar(255)
    displayName         String?  @db.VarChar(255)
    vendor              AiVendor @default(OPENAI)
    promptPrice         Float    @default(0)
    completionPrice     Float    @default(0)
    contextTokensMax    Int      @default(0)
    completionTokensMax Int      @default(0)
    description         String   @default("")
    createdAt           DateTime @default(now()) @db.Timestamp(6)
    updatedAt           DateTime @default(now()) @updatedAt @db.Timestamp(6)

    // For organization-scoped models (custom providers)
    apiKeyId Int?
    apiKey   OrganizationApiKey? @relation(fields: [apiKeyId], references: [id], onDelete: Cascade)

    // Custom model parameters configuration (for custom providers)
    // Stores which parameters are enabled and their constraints
    // Example: { "temperature": { "enabled": true, "min": 0, "max": 2, "default": 0.7 }, ... }
    parametersConfig Json?

    Prompts       Prompt[]
    PromptVersion PromptVersion[]

    // Global models: apiKeyId is null, unique by [vendor, name]
    // Org models: apiKeyId is set, unique by [apiKeyId, name]
    @@unique([vendor, name, apiKeyId])
    @@index([apiKeyId])
}
